/*! UX Rocket Select 
 *  jQuery based Select box replacement function 
 *  @author Bilal Cinarli <bcinarli@gmail.com> (http://bcinarli.com/) 
 *  @version 3.0.0 
 *  @build Fri Oct 23 2015 20:44:56 GMT+0300 (EEST) 
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports&&"function"==typeof require?require("jquery"):jQuery)}(function(t){"use strict";var e,s=1,i="uxrSelect",n=null,o={selection:'<a href="#" id="{{selectionClass}}-{{id}}" class="{{selectionClass}} {{#if multiple}}{{multipleClass}}{{/if}}" style="{{width}}">    <span class="{{selectionTextClass}}">{{selectionText}}</span>    <span class="{{arrowClass}}"></span></a>',multi:'<span class="{{selectionTagClass}} {{selectionTagClass}}-{{index}}" data-index="{{index}}">    {{selectionText}}</span>',search:'<span class="{{searchClass}}">   <input type="text" name="{{searchInput}}" /></span>',list:'<ul class="{{listClass}}">   {{#each options}}   <li{{#if options.selected}} class="{{selectedClass}}"{{/if}}>        <a class="{{optionClass}}" data-index="{{options.index}}" data-value="{{options.value}}">{{options.text}}</a>   </li>   {{/each}}</ul>',drop:'<div id="{{dropID}}" class="{{dropClass}}{{#if multiple}} {{multipleClass}}{{/if}}">    {{search}}    {{list}}</div>'},a={wrapper:"",current:"",arrow:"",list:"",option:"",selected:"",search:!0,searchItemLimit:10,minLetters:2,onReady:!1,onSelect:!1,onChange:!1,onUpdate:!1,onDestroy:!1},l={focus:"focus."+i,blur:"blur."+i,change:"change."+i,click:"click."+i,keyup:"keyup."+i,input:"input."+i,ready:"uxrready."+i,toggle:"uxrtoggle."+i,select:"uxrselect."+i,update:"uxrupdate."+i,destroy:"uxrdestroy."+i},r={prefix:"uxr-",rocket:"uxRocket",data:i,name:"select",classes:{wrap:"wrap",ready:"ready",selection:"selection",selectionText:"selection-text",selectionTag:"selected-tag",arrow:"arrow",multiple:"multiple",opened:"opened",drop:"drop",list:"list",option:"option",optionName:"option-name",selected:"selected",search:"search",hidden:"aria-hidden",hide:"hide"}},p=function(e,n,o){this._instance=s,this._name=i,this._defaults=a,this.wrapped=!1,this.utils=new window.uxrPluginUtils({ns:r}),this.el=e,this.$el=t(e),this.id="uxr-select-options-"+s,this.multiple=this.el.hasAttribute("multiple"),this.width=this.getWidth(),this.selector=o,this.opened=!1,this.tabbed=!1,this.clicked=0,this.options=t.extend(!0,{},a,n,this.$el.data()),s++,this.init()};p.prototype.init=function(){""===this.el.id&&(this.el.id=r.data+"-"+this._instance),this.registry(),this.getPosition(),this.getOptionData(),this.decorateUI(),this.prepareDrop(),this.bindUI(),this.$el.addClass(this.utils.getClassname("ready")),this.emitEvent("ready")},p.prototype.getSelected=function(){return{value:this.$el.val(),text:this.$el.find("option:selected").text()}},p.prototype.getOptionData=function(){var e=this,s=0;e.optionData=[],this.$el.find("option").each(function(){e.optionData.push({index:s,text:t(this).text(),value:t(this).val(),selected:t(this).is(":selected")}),s++})},p.prototype.decorateUI=function(){this.addAttributes(),this.wrap(),this.addSelection()},p.prototype.undecorateUI=function(){this.unwrap(),this.removeSelection(),this.removeAttributes()},p.prototype.wrap=function(){this.$el.parent().is("label")?this.$el.parent().addClass(this.utils.getClassname("wrap")):(this.wrapped=!0,this.$el.wrap('<label class="'+this.utils.getClassname("wrap")+'"></label>'))},p.prototype.unwrap=function(){this.wrapped?this.$el.unwrap():this.$el.parent().removeClass(this.utils.getClassname("wrap"))},p.prototype.addSelection=function(){var e=this.renderSelection();this.$selection=t(e),this.$el.after(this.$selection)},p.prototype.removeSelection=function(){this.$el.next("."+this.utils.getClassname("selection")).remove(),delete this.$selection},p.prototype.addAttributes=function(){this.$el.addClass(this.utils.getClassname("hidden")).attr("aria-hidden",!0)},p.prototype.removeAttributes=function(){this.$el.removeAttr("aria-hidden").removeClass(this.utils.getClassname("hidden")+" "+this.utils.getClassname("ready"))},p.prototype.bindUI=function(){var e=this;e.$el.on(l.focus,function(t){t.preventDefault(),e.onFocus()}).on(l.change,function(t){e.onChange(t)}).on(l.ready,function(t){e.onReady(t)}).on(l.select,function(t){e.onSelect(t)}).on(l.update,function(){e.onUpdate()}).on(l.destroy,function(){e.onDestroy()}),e.$selection.on(l.focus+" "+l.keyup,function(t){t.preventDefault(),9===t.keyCode&&(e.tabbed=!0),e.onFocus()}).on(l.blur,function(){n&&0===e.clicked&&e.opened&&!e.tabbed&&e.onBlur()}).on(l.click,function(t){t.stopPropagation(),t.preventDefault(),e.clicked++,e.opened?(e.opened&&e.clicked%2===0||e.opened&&e.tabbed)&&e.onBlur():e.onFocus()}),t(document).on(l.click,function(t){(0===e.$drop.has(t.target).length||0===e.$selection.has(t.target))&&e.onBlur()})},p.prototype.bindDropUI=function(){var t=this;t.$drop.on(l.click,"."+t.utils.getClassname("option"),function(e){e.preventDefault(),t.emitEvent("select"),t.select(e)}).on(l.keyup+" "+l.input,"."+t.utils.getClassname("search")+" input",function(e){e.preventDefault(),this.value.length>=t.options.minLetters?t.search(this.value):t.setOriginalList()})},p.prototype.unbindUI=function(){this.emitEvent("destroy"),this.$el.off("."+i)},p.prototype.select=function(e){var s=t(e.currentTarget),i=this.utils.getClassname("selected"),n=this.utils.getClassname("selectionText"),a=this.utils.getClassname("selectionTag"),l=s.data("index"),r=s.text();if(this.multiple)if(s.parent().hasClass(i))this.$el.find("option:eq("+l+")").prop("selected",!1),s.parent().removeClass(i),this.$selection.find("."+a+"-"+l).remove();else{var p=this.utils.render(o.multi,{selectionText:r,selectionTagClass:a,index:l});s.parent().addClass(i),this.$selection.find("."+n).append(p),this.$el.find("option:eq("+l+")").prop("selected",!0)}else s.parent().addClass(i).siblings("."+i).removeClass(i),this.$selection.find("."+n).text(r),this.$el.find("option:eq("+l+")").prop("selected",!0),this.onBlur();this.emitEvent("change")},p.prototype.search=function(e){var s,i,n=this;s=t.map(this.optionData,function(t){return n._search(t,e)?t:void 0}),i=this.renderList(s),this.$drop.find("."+this.utils.getClassname("list")).replaceWith(i)},p.prototype._search=function(t,e){var s=t.text.replace("İ","i").toLowerCase(),i=t.value.replace("İ","i").toLowerCase(),n=e.replace("İ","i").toLowerCase();return s.indexOf(n)>-1||i.toLowerCase().indexOf(n)>-1},p.prototype.showDrop=function(){this.$drop.appendTo("body"),this.bindDropUI()},p.prototype.hideDrop=function(){this.$drop.remove(),this.$search.val(""),this.setOriginalList()},p.prototype.renderSelection=function(){var t={id:this.el.id,selectionClass:this.utils.getClassname("selection"),multiple:this.multiple,multipleClass:this.utils.getClassname("multiple"),width:"width:"+this.width,selectionTextClass:this.utils.getClassname("selectionText"),selectionText:this.getSelected().text,arrowClass:this.utils.getClassname("arrow")};return this.utils.render(o.selection,t)},p.prototype.renderSearchField=function(){var t={searchClass:this.utils.getClassname("search"),searchInput:this.utils.getClassname("search")+"-"+this._instance,list:this.id};return this.utils.render(o.search,t)},p.prototype.renderList=function(t){var e={listClass:this.utils.getClassname("list"),selectedClass:this.utils.getClassname("selected"),optionClass:this.utils.getClassname("option"),options:t||this.optionData};return this.utils.render(o.list,e)},p.prototype.renderDrop=function(){var t={dropID:this.id,dropClass:this.utils.getClassname("drop"),multiple:this.multiple,multipleClass:this.utils.getClassname("drop")+"-multiple",search:this.renderSearchField(),list:this.renderList()};return this.utils.render(o.drop,t)},p.prototype.prepareDrop=function(){this.$drop=t(this.renderDrop()),this.$list=this.$drop.find("."+this.utils.getClassname("list")),this.$search=this.$drop.find("."+this.utils.getClassname("search")+" input"),this.setDropPosition(),!this.options.search||this.optionData.length>=this.options.searchItemLimit?this.$search.parent().addClass(this.utils.getClassname("hide")):this.$search.parent().removeClass(this.utils.getClassname("hide"))},p.prototype.setDropPosition=function(){this.$drop.css({top:this.position.top,left:this.position.left,minWidth:this.$selection.outerWidth()})},p.prototype.setOriginalList=function(){this.$drop.find("."+this.utils.getClassname("list")).replaceWith(this.$list)},p.prototype.onFocus=function(){e.close(this._instance),n=this._instance,this.showDrop(),this.$selection.addClass(this.utils.getClassname("opened")),this.opened=!0},p.prototype.onBlur=function(){n=null,this.hideDrop(),this.$selection.removeClass(this.utils.getClassname("opened")),this.opened=!1,this.tabbed=!1,this.clicked=0},p.prototype.onChange=function(t){this.utils.callback(this.options.onChange)},p.prototype.onReady=function(){this.utils.callback(this.options.onReady)},p.prototype.onSelect=function(){this.utils.callback(this.options.onSelect)},p.prototype.onUpdate=function(){this.utils.callback(this.options.onUpdate)},p.prototype.onDestroy=function(){this.utils.callback(this.options.onDestroy)},p.prototype.update=function(){this.emitEvent("update")},p.prototype.close=function(){this.onBlur()},p.prototype.destroy=function(){this.emitEvent("destroy"),this.unbindUI(),this.undecorateUI(),this.$el.removeData(i)},p.prototype.registry=function(){var t=this.$el.data(r.rocket)||{};t[r.data]={hasWrapper:!0,wrapper:r.wrap,ready:this.utils.getClassname("ready"),selector:this.selector,options:this.options},this.$el.data(r.rocket,t)},p.prototype.getPosition=function(){this.position={top:this.el.offsetTop,left:this.el.offsetLeft}},p.prototype.getWidth=function(){var e,s=this.$el.attr("class"),i=this.$el.attr("style"),n=t(document.createElement("div")).css("display","none"),o="";return s&&(o+=' class="'+s.replace(this.utils.getClassname("ready"),"").replace(this.utils.getClassname("hidden"),"")+'"'),i&&(o+=' style="'+i+'"'),n.html("<div "+o+"></div>").appendTo("body"),e=n.find("div").css("width"),n.remove(),e},p.prototype.emitEvent=function(t){this.$el.trigger(l[t])},e=t.fn.select=t.fn.uxrselect=t.fn.uxitdselect=t.uxrselect=function(e){var s=this.selector;return this.each(function(){t.data(this,r.data)||t.data(this,r.data,new p(this,e,s))})},e.update=function(e,s){var i,n;"undefined"==typeof s&&"object"==typeof e?(i=t(".uxr-select-ready"),n=e):(i=t(e),n=s),i.filter("input").each(function(){var e=t(this),s=e.data(r.data),i=s.options;s.options=t.extend(!0,{},i,n),e.utils.callback(i.onUpdate)})},e.close=function(e){var s=t("undefined"==typeof el?".uxr-select-ready":el);s.each(function(){var s=t(this).data(r.data);s._instance!==e&&s.close()})},e.destroy=function(e){var s=t("undefined"==typeof e?".uxr-select-ready":e);s.each(function(){t(this).data(r.data).destroy()})},e.version="3.0.0",e.settings=a,e.namespace=r});