/*! UX Rocket Select 
 *  jQuery based Select box replacement function 
 *  @author Bilal Cinarli <bcinarli@gmail.com> (http://bcinarli.com/) 
 *  @version 3.0.0 
 *  @build Tue Nov 17 2015 12:16:00 GMT+0200 (EET) 
 */
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports&&"function"==typeof require?require("jquery"):jQuery)}(function(t){"use strict";"undefined"==typeof window.UXRocket&&console.warn("UXRocket Select is required UXRocket Factory to run properly. You can clone/download factory at https://github.com/uxrocket/uxrocket.factory");var e,s=1,i="uxrSelect",o=null,n={selection:'<a href="#" id="{{selectionClass}}-{{id}}" class="{{selectionClass}} {{#if multiple}}{{multipleClass}}{{/if}} {{themeCurrent}}" style="{{width}}">    <span class="{{selectionTextClass}}">{{selectionText}}</span>    <span class="{{arrowClass}} {{themeArrow}}"></span></a>',multi:'<span class="{{selectionTagClass}} {{selectionTagClass}}-{{index}}" data-index="{{index}}" data-value="{{value}}">    {{selectionText}}    <span class="{{removeSelectionClass}}">X</span></span>',search:'<span class="{{searchClass}}">   <input type="text" name="{{searchInput}}" /></span>',list:'<ul class="{{listClass}} {{themeList}}">   {{#each options}}   <li id="{{optionClass}}-{{options.index}}"{{#if options.selected}} class="{{selectedClass}} {{themeSelected}}"{{/if}}>        <a class="{{optionClass}} {{themeOption}}" data-index="{{options.index}}" data-value="{{options.value}}">{{options.text}}</a>   </li>   {{/each}}</ul>',drop:'<div id="{{dropID}}" class="{{dropClass}}{{#if multiple}} {{multipleClass}}{{/if}}">    {{search}}    {{list}}</div>'},l={wrapper:"",current:"",arrow:"",list:"",option:"",selected:"",search:!0,searchItemLimit:10,searchType:"starts",minLetters:2,onReady:!1,onSelect:!1,onChange:!1,onUpdate:!1,onDestroy:!1},a={focus:"focus."+i,blur:"blur."+i,change:"change."+i,click:"click."+i,keyup:"keyup."+i,keydown:"keydown."+i,input:"input."+i,ready:"uxrready."+i,select:"uxrselect."+i,update:"uxrupdate."+i,destroy:"uxrdestroy."+i},r={codes:{9:"tab",13:"return",27:"esc",37:"left",38:"up",39:"right",40:"down"},tab:9,"return":13,esc:27,left:37,up:38,right:39,down:40},h={prefix:"uxr-",rocket:"uxRocket",data:i,name:"select",classes:{wrap:"wrap",ready:"ready",selection:"selection",selectionText:"selection-text",selectionTag:"selected-tag",removeSelection:"remove-selected-tag",arrow:"arrow",multiple:"multiple",opened:"opened",drop:"drop",list:"list",option:"option",optionName:"option-name",highlight:"highlight",selected:"selected",search:"search",hidden:"aria-hidden",hide:"hide"}},p=function(e,o,n){this._instance=s,this._name=i,this._defaults=l,this.wrapped=!1,this.utils=new window.uxrPluginUtils({ns:h}),this.el=e,this.$el=t(e),this.id="uxr-select-options-"+s,this.multiple=this.el.hasAttribute("multiple"),this.width=this.getWidth(),this.selector=n,this.opened=!1,this.tabbed=!1,this.clicked=0,this.options=t.extend(!0,{},l,o,this.$el.data()),s++,this.init()};p.prototype.init=function(){""===this.el.id&&(this.el.id=h.data+"-"+this._instance),this.registry(),this.getOptionData(),this.decorateUI(),this.prepareDrop(),this.bindUI(),this.$el.addClass(this.utils.getClassname("ready")),this.emitEvent("ready")},p.prototype.getSelected=function(){return{value:this.$el.val(),text:this.$el.find("option:selected").text()}},p.prototype.getOptionData=function(){var e=this,s=0;e.optionData=[],this.$el.find("option").each(function(){e.optionData.push({index:s,text:t(this).text(),value:t(this).val(),selected:t(this).is(":selected")}),s++})},p.prototype.decorateUI=function(){this.addAttributes(),this.wrap(),this.addSelection()},p.prototype.undecorateUI=function(){this.unwrap(),this.removeSelection(),this.removeAttributes()},p.prototype.wrap=function(){this.$el.parent().is("label")?this.$el.parent().addClass(this.utils.getClassname("wrap")):(this.wrapped=!0,this.$el.wrap('<label class="'+this.utils.getClassname("wrap")+'"></label>')),this.$el.parent().addClass(this.options.wrapper)},p.prototype.unwrap=function(){this.wrapped?this.$el.unwrap():this.$el.parent().removeClass(this.utils.getClassname("wrap")+" "+this.options.wrapper)},p.prototype.addSelection=function(){var e=this.renderSelection();this.$selection=t(e),this.$el.after(this.$selection)},p.prototype.removeSelection=function(){this.$el.next("."+this.utils.getClassname("selection")).remove(),delete this.$selection},p.prototype.addAttributes=function(){this.$el.addClass(this.utils.getClassname("hidden")).attr("aria-hidden",!0)},p.prototype.removeAttributes=function(){this.$el.removeAttr("aria-hidden").removeClass(this.utils.getClassname("hidden")+" "+this.utils.getClassname("ready"))},p.prototype.bindUI=function(){var e=this;e.$el.on(a.focus,function(t){t.preventDefault(),e.onFocus()}).on(a.change,function(t){e.onChange(t)}).on(a.ready,function(t){e.onReady(t)}).on(a.select,function(t){e.onSelect(t)}).on(a.update,function(){e.onUpdate()}).on(a.destroy,function(){e.onDestroy()}),e.$selection.on(a.keydown,function(t){t.preventDefault()}).on(a.keyup,function(t){t.preventDefault(),e.onKeyup(t)}).on(a.focus,function(t){t.preventDefault(),e.onFocus()}).on(a.blur,function(){o&&0===e.clicked&&e.opened&&!e.tabbed&&e.onBlur()}).on(a.click,function(t){t.stopPropagation(),t.preventDefault(),e.onClick(t)}).on(a.click,"."+e.utils.getClassname("removeSelection"),function(s){e.removeTag(t(s.target))}),t(document).on(a.click,function(t){(0===e.$drop.has(t.target).length||0===e.$selection.has(t.target))&&e.onBlur()})},p.prototype.bindDropUI=function(){var e=this;e.$drop.on(a.click,"."+e.utils.getClassname("option"),function(s){s.preventDefault(),e.emitEvent("select"),e.select(t(s.currentTarget))}).on(a.keyup+" "+a.input,"."+e.utils.getClassname("search")+" input",function(t){t.preventDefault(),(t.keyCode===r.up||t.keyCode===r.down)&&e.navigateWithArrow(r.codes[t.keyCode]),t.keyCode===r["return"]&&e.navigateWithEnter(),this.value.length>=e.options.minLetters?e.search(this.value):e.setOriginalList()})},p.prototype.unbindUI=function(){this.emitEvent("destroy"),this.$el.off("."+i)},p.prototype.select=function(t){var e=this.utils.getClassname("selected"),s=this.utils.getClassname("highlight"),i=this.utils.getClassname("selectionText"),o=this.utils.getClassname("selectionTag"),l=this.utils.getClassname("removeSelection"),a=t.parent(),r=a.attr("id"),h=t.data("index"),p=t.data("value"),c=t.text();if(this.multiple){if(a.hasClass(e))this.$el.find("option:eq("+h+")").prop("selected",!1),a.removeClass(e),this.$selection.find("."+o+"-"+h).remove(),null===this.$el.val()&&this.$selection.find("."+i).text(this.multiplePlaceholder);else{var d=this.utils.render(n.multi,{selectionText:c,selectionTagClass:o,removeSelectionClass:l,index:h,value:p});a.addClass(e),null===this.$el.val()?this.$selection.find("."+i).html(d):this.$selection.find("."+i).append(d),this.$el.find("option:eq("+h+")").prop("selected",!0)}this.setDropPosition()}else this.$list.find("."+s).removeClass(s),this.$list.find("."+e).removeClass(e),this.$selection.find("."+i).text(c),this.$el.find("option:eq("+h+")").prop("selected",!0),this.onBlur(),this.$list.find("#"+r).addClass(e);this.emitEvent("change")},p.prototype.removeTag=function(e){var s=e.parent().data("index");this.$el.find("option:eq("+s+")").prop("selected",!1),t("#"+this.utils.getClassname("option")+"-"+s).removeClass(this.utils.getClassname("selected")),e.parent().remove(),null===this.$el.val()&&this.$selection.find("."+this.utils.getClassname("selectionText")).text(this.multiplePlaceholder),this.setDropPosition()},p.prototype.search=function(e){var s,i,o=this,n=this.$drop.find("."+this.utils.getClassname("list"));s=t.map(this.optionData,function(t){return o._search(t,e)?t:void 0}),i=this.renderList(s),n.replaceWith(i)},p.prototype._search=function(t,e){var s=t.text.replace("İ","i").toLowerCase(),i=t.value.replace("İ","i").toLowerCase(),o=e.replace("İ","i").toLowerCase();switch(this.options.searchType){default:case"starts":return 0===s.indexOf(o)||0===i.toLowerCase().indexOf(o);case"contains":return s.indexOf(o)>-1||i.toLowerCase().indexOf(o)>-1}},p.prototype.showDrop=function(){this.$drop.appendTo("body"),this.setDropPosition(),this.setListPosition(),this.$list.find("."+this.utils.getClassname("highlight")).removeClass(this.utils.getClassname("highlight")),this.bindDropUI()},p.prototype.hideDrop=function(){this.$drop.remove(),this.$search.val(""),this.setOriginalList()},p.prototype.navigateWithEnter=function(){if(!this.multiple){var t=this.utils.getClassname("highlight"),e=this.$list.find("."+t);e.length>0&&(e.removeClass(t),this.emitEvent("select"),this.select(e.find("a")))}},p.prototype.navigateWithArrow=function(t){var e,s="up"===t?"prev":"next",i=this.utils.getClassname("highlight"),o=this.$list.find("."+i).length>0?this.$list.find("."+i):this.$list.find("."+this.utils.getClassname("selected")),n=this.$list.offset().top,l=this.$list.scrollTop(),a=this.$list.height();if(o.length)e=o.removeClass(i)[s]().addClass(i),e.length||(e="prev"===s?this.$list.find("li").last().addClass(i):this.$list.find("li").first().addClass(i)),e.length&&("down"===t?e.offset().top>n+a-e.height()?this.$list.scrollTop(l+e.height()):e.offset().top<n&&this.$list.scrollTop(0):e.offset().top<n?this.$list.scrollTop(l-e.height()):e.offset().top>n+a&&this.$list.scrollTop(l+e.offset().top));else{var r="up"===t?"last":"first";e=this.$list.find("li")[r]().addClass(i)}},p.prototype.renderSelection=function(){var t={id:this.el.id,selectionClass:this.utils.getClassname("selection"),multiple:this.multiple,multipleClass:this.utils.getClassname("multiple"),width:"width:"+this.width,selectionTextClass:this.utils.getClassname("selectionText"),selectionText:this.getSelected().text,arrowClass:this.utils.getClassname("arrow"),themeCurrent:this.options.current,themeArrow:this.options.arrow};return this.multiple&&(this.multiplePlaceholder=this.$el.attr("placeholder")||this.options.placeholder||"",t.selectionText=this.multiplePlaceholder),this.utils.render(n.selection,t)},p.prototype.renderSearchField=function(){var t={searchClass:this.utils.getClassname("search"),searchInput:this.utils.getClassname("search")+"-"+this._instance,list:this.id};return this.utils.render(n.search,t)},p.prototype.renderList=function(t){var e={listClass:this.utils.getClassname("list"),selectedClass:this.utils.getClassname("selected"),optionClass:this.utils.getClassname("option"),options:t||this.optionData,themeList:this.options.list,themeSelected:this.options.selected,themeOption:this.options.option};return this.utils.render(n.list,e)},p.prototype.renderDrop=function(){var t={dropID:this.id,dropClass:this.utils.getClassname("drop"),multiple:this.multiple,multipleClass:this.utils.getClassname("drop")+"-multiple",search:this.renderSearchField(),list:this.renderList()};return this.utils.render(n.drop,t)},p.prototype.prepareDrop=function(){this.$drop=t(this.renderDrop()),this.$list=this.$drop.find("."+this.utils.getClassname("list")),this.$search=this.$drop.find("."+this.utils.getClassname("search")+" input"),this.setDropPosition(),this.setListPosition(),!this.options.search||this.options.searchItemLimit>=this.optionData.length?this.$search.parent().addClass(this.utils.getClassname("hide")):this.$search.parent().removeClass(this.utils.getClassname("hide"))},p.prototype.setDropPosition=function(){this.$drop.css({top:this.getPosition().top+this.$selection.height(),left:this.getPosition().left,minWidth:this.$selection.outerWidth()})},p.prototype.setListPosition=function(){var t=this.$list.find("."+this.utils.getClassname("selected")+":eq(0)");1===t.length&&this.$list.scrollTop(t.offset().top-this.$list.offset().top-this.$list.height()/2)},p.prototype.setOriginalList=function(){this.$drop.find("."+this.utils.getClassname("list")).replaceWith(this.$list)},p.prototype.onKeyup=function(t){switch(t.keyCode){case r.tab:this.tabbed=!0,this.onFocus();break;case r["return"]:this.navigateWithEnter();break;case r.up:case r.down:this.navigateWithArrow(r.codes[t.keyCode])}},p.prototype.onClick=function(e){t(e.target).is("."+this.utils.getClassname("removeSelection"))||(this.clicked++,this.opened?(this.opened&&this.clicked%2===0||this.opened&&this.tabbed)&&this.onBlur():this.onFocus())},p.prototype.onFocus=function(){e.close(this._instance),o=this._instance,this.showDrop(),this.$selection.addClass(this.utils.getClassname("opened")),this.$search.focus(),this.opened=!0},p.prototype.onBlur=function(){o=null,this.hideDrop(),this.$selection.removeClass(this.utils.getClassname("opened")),this.opened=!1,this.tabbed=!1,this.clicked=0},p.prototype.onChange=function(t){this.utils.callback(this.options.onChange)},p.prototype.onReady=function(){this.utils.callback(this.options.onReady)},p.prototype.onSelect=function(){this.utils.callback(this.options.onSelect)},p.prototype.onUpdate=function(){this.utils.callback(this.options.onUpdate)},p.prototype.onDestroy=function(){this.utils.callback(this.options.onDestroy)},p.prototype.update=function(){this.emitEvent("update")},p.prototype.close=function(){this.onBlur()},p.prototype.destroy=function(){this.emitEvent("destroy"),this.unbindUI(),this.undecorateUI(),this.$el.removeData(i)},p.prototype.registry=function(){var t=this.$el.data(h.rocket)||{};t[h.data]={hasWrapper:!0,wrapper:h.wrap,ready:this.utils.getClassname("ready"),selector:this.selector,options:this.options},this.$el.data(h.rocket,t)},p.prototype.getPosition=function(){return{top:this.$selection.offset().top,left:this.$selection.offset().left}},p.prototype.getWidth=function(){var e,s=this.$el.attr("class"),i=this.$el.attr("style"),o=t(document.createElement("div")).css("display","none"),n="";return s&&(n+=' class="'+s.replace(this.utils.getClassname("ready"),"").replace(this.utils.getClassname("hidden"),"")+'"'),i&&(n+=' style="'+i+'"'),o.html("<div "+n+"></div>").appendTo("body"),e=o.find("div").css("width"),"0px"===e&&(e=this.$el.width()+"px"),o.remove(),e},p.prototype.emitEvent=function(t){this.$el.trigger(a[t])},e=t.fn.select=t.fn.uxrselect=t.fn.uxitdselect=t.uxrselect=function(e){var s=this.selector;return this.each(function(){t.data(this,h.data)||t.data(this,h.data,new p(this,e,s))})},e.update=function(e,s){var i,o;"undefined"==typeof s&&"object"==typeof e?(i=t(".uxr-select-ready"),o=e):(i=t(e),o=s),i.filter("select").each(function(){var e=t(this),s=e.data(h.data),i=s.options;s.options=t.extend(!0,{},i,o),e.utils.callback(i.onUpdate)})},e.close=function(e){var s=t("undefined"==typeof el?".uxr-select-ready":el);s.each(function(){var s=t(this).data(h.data);s._instance!==e&&s.close()})},e.destroy=function(e){var s=t("undefined"==typeof e?".uxr-select-ready":e);s.each(function(){t(this).data(h.data).destroy()})},e.version="3.0.0-rc1",e.settings=l,e.namespace=h});